{# version 1.00, date 13/05/2016, auteur Matthieu Martins-Baltar #}
{% extends "UserBundle::layout.html.twig" %}

{% block title %}

    Liste des bénévoles - {{ parent() }}

{% endblock %}

{% block body %}
    <h1>Liste des Bénévoles</h1>

<table class="table table-striped table-hover ">
    <thead>
    <tr>
        <th>Nom</th>
        <th>Prénom</th>
        <th>Responsabilité</th>
        <th>Consulter</th>
        <th>Supprimer</th>
    </tr>
    {% for benevole in listBenevoles|sort %}
    <tr>
        <td>{{ benevole.nom }}</td><td>{{ benevole.prenom }}</td> <td name="resp">{{ benevole.responsabiliteActivite }}</td><td><button type="button" class="btn btn-primary">Consulter le profil</button></td><td><button type="button" class="btn btn-danger">Supprimer</button></td>
    </tr>
    {% endfor %}
    </thead>
</table>
{% endblock %}

{% block javascripts %}
{{ parent() }}
    <script type="application/javascript">
    var tdElements = document.getElementsByName("resp");
    for(var i= 0; i<tdElements.length;i++ ){
        listElement = document.createElement('ul');
       console.log(tdElements[i].textContent);
        var text = tdElements[i].textContent;
        text = text.replace(/[{()}]/g, '');
        text = text.split(',');
        for(var j =0; j < text.length;j++){
            itemElement = document.createElement('li');
            itemElement.textContent = text[j];
            listElement.appendChild(itemElement);
        }
        tdElements[i].innerHTML ='';
        tdElements[i].appendChild(listElement);
    }
    </script>
{% endblock %}
